<?php
$servername = "localhost";
$username = "root";
$password = "wit123";
$dbname = "reggiedb";
//Create db
//SEMESTERS : FreshmanFall=0 FreshmanSpring=1, FreshmanSummer=2,Sophomorefall=3, SophomoreSpring=4, SophomoreSummer=5, JuniorFall=6, JuniorSpring=7,JuniorSummer=8,SeniorFall=9,SeniorSpring=10,SeniorSummer=11
//Priority should match above, as well as semester taken in progress field.
$conn = new mysqli($servername, $username, $password);
if($conn->connect_error) {
	die("Connection failed: " .$conn->connect_error);
}
$sql = "CREATE DATABASE IF NOT EXISTS reggiedb";
if($conn->query($sql)=== TRUE) {
	echo "Databse created Successfully<br/>";
}else {
	echo "Error creating database: " .$conn->error;
}
// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);
// Check connection

if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
} 
//Student ID autogenerated in system.
// sql to create table
$sql_student = "CREATE TABLE IF NOT EXISTS student (
userID INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY, 
trackingID VARCHAR(8) NOT NULL,
year INTEGER(1) NOT NULL,
email VARCHAR(50) NOT NULL,
password CHAR(32)
)";  

if ($conn->query($sql_student) === TRUE) {
    echo "Table students created successfully<br/>";
} else {
    echo "Error creating student table: " . $conn->error."<br/>";
}
//Tracking sheet ID should be formatted like BCOS1415 for Bachelor of Comp-sci 2014-2015
$sql_progress = "CREATE TABLE IF NOT EXISTS progress (
trackingID VARCHAR(8) NOT NULL,
userID INT(6) UNSIGNED NOT NULL,
reqID VARCHAR(8),
courseID VARCHAR(8),
passed CHAR(1),
priority INT(2) UNSIGNED NOT NULL,
semtaken INT(2) UNSIGNED NOT NULL

)";

if ($conn->query($sql_progress) === TRUE) {
    echo "Table progress created successfully<br/>";
} else {
    echo "Error creating progress table: " . $conn->error."<br/>";
}

$sql_tracking = "CREATE TABLE IF NOT EXISTS TrackingSheet (
trackingID VARCHAR(8) PRIMARY KEY,
major VARCHAR (20),
year VARCHAR (9)
)";

if ($conn->query($sql_tracking) === TRUE) {
    echo "Table trackingSheet created successfully<br/>";
} else {
    echo "Error creating tracking table: " . $conn->error."<br/>";
}

$sql_semester ="CREATE TABLE IF NOT EXISTS semester (
trackingID VARCHAR(8),
reqID1 VARCHAR(8),
reqID2 VARCHAR(8),
reqID3 VARCHAR(8),
reqID4 VARCHAR(8),
semesterOrder INT(2) UNSIGNED NOT NULL
)";
if ($conn->query($sql_semester) === TRUE) {
    echo "Table semester created successfully<br/>";
} else {
    echo "Error creating semester table: " . $conn->error."<br/>";
}
//reqID format HUMN####, use course ID if requirement is a course, otherwise use ELEC for last 4 (HUMNELEC)
$sql_req = "CREATE TABLE IF NOT EXISTS requirement (
reqID VARCHAR(8) PRIMARY KEY NOT NULL,
requirement VARCHAR(20)
)";
if ($conn->query($sql_req) === TRUE) {
    echo "Table requirement created successfully<br/>";
} else {
    echo "Error creating requirement table: " . $conn->error."<br/>";
}
//courseID COMP#### etc. just like in lconnect
$sql_course = "CREATE TABLE IF NOT EXISTS course (
CourseID VARCHAR(8) PRIMARY KEY,
preReq VARCHAR(20),
tags VARCHAR(20)
)";
if ($conn->query($sql_course) === TRUE) {
    echo "Table course created successfully<br/>";
} else {
    echo "Error creating Course table: " . $conn->error."<br/>";
}
//need to check how many numbers in a CRN but you get the idea
$sql_section = "CREATE TABLE IF NOT EXISTS section (
CRN VARCHAR (12) PRIMARY KEY,
courseID VARCHAR(8),
professor VARCHAR(36),
location VARCHAR(12),
time TIME,
capacity INT(3) UNSIGNED,
taken INT(3) UNSIGNED
)";
if ($conn->query($sql_section) === TRUE) {
    echo "Table section created successfully<br/>";
} else {
    echo "Error creating section table: " . $conn->error."<br/>";
}
$conn->close();
?>